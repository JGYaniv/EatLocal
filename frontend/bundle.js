!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=27)}([function(e,t,n){"use strict";var o=n(1),r=Object.prototype.toString;function a(e){return"[object Array]"===r.call(e)}function s(e){return void 0===e}function i(e){return null!==e&&"object"==typeof e}function c(e){return"[object Function]"===r.call(e)}function l(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),a(e))for(var n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}e.exports={isArray:a,isArrayBuffer:function(e){return"[object ArrayBuffer]"===r.call(e)},isBuffer:function(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:i,isUndefined:s,isDate:function(e){return"[object Date]"===r.call(e)},isFile:function(e){return"[object File]"===r.call(e)},isBlob:function(e){return"[object Blob]"===r.call(e)},isFunction:c,isStream:function(e){return i(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:l,merge:function e(){var t={};function n(n,o){"object"==typeof t[o]&&"object"==typeof n?t[o]=e(t[o],n):t[o]=n}for(var o=0,r=arguments.length;o<r;o++)l(arguments[o],n);return t},deepMerge:function e(){var t={};function n(n,o){"object"==typeof t[o]&&"object"==typeof n?t[o]=e(t[o],n):t[o]="object"==typeof n?e({},n):n}for(var o=0,r=arguments.length;o<r;o++)l(arguments[o],n);return t},extend:function(e,t,n){return l(t,(function(t,r){e[r]=n&&"function"==typeof t?o(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),o=0;o<n.length;o++)n[o]=arguments[o];return e.apply(t,n)}}},function(e,t,n){"use strict";var o=n(0);function r(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var a;if(n)a=n(t);else if(o.isURLSearchParams(t))a=t.toString();else{var s=[];o.forEach(t,(function(e,t){null!=e&&(o.isArray(e)?t+="[]":e=[e],o.forEach(e,(function(e){o.isDate(e)?e=e.toISOString():o.isObject(e)&&(e=JSON.stringify(e)),s.push(r(t)+"="+r(e))})))})),a=s.join("&")}if(a){var i=e.indexOf("#");-1!==i&&(e=e.slice(0,i)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";(function(t){var o=n(0),r=n(16),a={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!o.isUndefined(e)&&o.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var i,c={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==t&&"[object process]"===Object.prototype.toString.call(t))&&(i=n(5)),i),transformRequest:[function(e,t){return r(t,"Accept"),r(t,"Content-Type"),o.isFormData(e)||o.isArrayBuffer(e)||o.isBuffer(e)||o.isStream(e)||o.isFile(e)||o.isBlob(e)?e:o.isArrayBufferView(e)?e.buffer:o.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):o.isObject(e)?(s(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};c.headers={common:{Accept:"application/json, text/plain, */*"}},o.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),o.forEach(["post","put","patch"],(function(e){c.headers[e]=o.merge(a)})),e.exports=c}).call(this,n(15))},function(e,t,n){"use strict";var o=n(0),r=n(17),a=n(2),s=n(19),i=n(22),c=n(23),l=n(6);e.exports=function(e){return new Promise((function(t,u){var d=e.data,p=e.headers;o.isFormData(d)&&delete p["Content-Type"];var f=new XMLHttpRequest;if(e.auth){var m=e.auth.username||"",h=e.auth.password||"";p.Authorization="Basic "+btoa(m+":"+h)}var g=s(e.baseURL,e.url);if(f.open(e.method.toUpperCase(),a(g,e.params,e.paramsSerializer),!0),f.timeout=e.timeout,f.onreadystatechange=function(){if(f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in f?i(f.getAllResponseHeaders()):null,o={data:e.responseType&&"text"!==e.responseType?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:n,config:e,request:f};r(t,u,o),f=null}},f.onabort=function(){f&&(u(l("Request aborted",e,"ECONNABORTED",f)),f=null)},f.onerror=function(){u(l("Network Error",e,null,f)),f=null},f.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),u(l(t,e,"ECONNABORTED",f)),f=null},o.isStandardBrowserEnv()){var y=n(24),w=(e.withCredentials||c(g))&&e.xsrfCookieName?y.read(e.xsrfCookieName):void 0;w&&(p[e.xsrfHeaderName]=w)}if("setRequestHeader"in f&&o.forEach(p,(function(e,t){void 0===d&&"content-type"===t.toLowerCase()?delete p[t]:f.setRequestHeader(t,e)})),o.isUndefined(e.withCredentials)||(f.withCredentials=!!e.withCredentials),e.responseType)try{f.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&f.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){f&&(f.abort(),u(e),f=null)})),void 0===d&&(d=null),f.send(d)}))}},function(e,t,n){"use strict";var o=n(18);e.exports=function(e,t,n,r,a){var s=new Error(e);return o(s,t,n,r,a)}},function(e,t,n){"use strict";var o=n(0);e.exports=function(e,t){t=t||{};var n={},r=["url","method","params","data"],a=["headers","auth","proxy"],s=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];o.forEach(r,(function(e){void 0!==t[e]&&(n[e]=t[e])})),o.forEach(a,(function(r){o.isObject(t[r])?n[r]=o.deepMerge(e[r],t[r]):void 0!==t[r]?n[r]=t[r]:o.isObject(e[r])?n[r]=o.deepMerge(e[r]):void 0!==e[r]&&(n[r]=e[r])})),o.forEach(s,(function(o){void 0!==t[o]?n[o]=t[o]:void 0!==e[o]&&(n[o]=e[o])}));var i=r.concat(a).concat(s),c=Object.keys(t).filter((function(e){return-1===i.indexOf(e)}));return o.forEach(c,(function(o){void 0!==t[o]?n[o]=t[o]:void 0!==e[o]&&(n[o]=e[o])})),n}},function(e,t,n){"use strict";function o(e){this.message=e}o.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},o.prototype.__CANCEL__=!0,e.exports=o},function(e,t,n){e.exports=n(10)},function(e,t,n){"use strict";var o=n(0),r=n(1),a=n(11),s=n(7);function i(e){var t=new a(e),n=r(a.prototype.request,t);return o.extend(n,a.prototype,t),o.extend(n,t),n}var c=i(n(4));c.Axios=a,c.create=function(e){return i(s(c.defaults,e))},c.Cancel=n(8),c.CancelToken=n(25),c.isCancel=n(3),c.all=function(e){return Promise.all(e)},c.spread=n(26),e.exports=c,e.exports.default=c},function(e,t,n){"use strict";var o=n(0),r=n(2),a=n(12),s=n(13),i=n(7);function c(e){this.defaults=e,this.interceptors={request:new a,response:new a}}c.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=i(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[s,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},c.prototype.getUri=function(e){return e=i(this.defaults,e),r(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},o.forEach(["delete","get","head","options"],(function(e){c.prototype[e]=function(t,n){return this.request(o.merge(n||{},{method:e,url:t}))}})),o.forEach(["post","put","patch"],(function(e){c.prototype[e]=function(t,n,r){return this.request(o.merge(r||{},{method:e,url:t,data:n}))}})),e.exports=c},function(e,t,n){"use strict";var o=n(0);function r(){this.handlers=[]}r.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){o.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=r},function(e,t,n){"use strict";var o=n(0),r=n(14),a=n(3),s=n(4);function i(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return i(e),e.headers=e.headers||{},e.data=r(e.data,e.headers,e.transformRequest),e.headers=o.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),o.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||s.adapter)(e).then((function(t){return i(e),t.data=r(t.data,t.headers,e.transformResponse),t}),(function(t){return a(t)||(i(e),t&&t.response&&(t.response.data=r(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,n){"use strict";var o=n(0);e.exports=function(e,t,n){return o.forEach(n,(function(n){e=n(e,t)})),e}},function(e,t){var n,o,r=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function i(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(e){o=s}}();var c,l=[],u=!1,d=-1;function p(){u&&c&&(u=!1,c.length?l=c.concat(l):d=-1,l.length&&f())}function f(){if(!u){var e=i(p);u=!0;for(var t=l.length;t;){for(c=l,l=[];++d<t;)c&&c[d].run();d=-1,t=l.length}c=null,u=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function h(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new m(e,t)),1!==l.length||u||i(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=h,r.addListener=h,r.once=h,r.off=h,r.removeListener=h,r.removeAllListeners=h,r.emit=h,r.prependListener=h,r.prependOnceListener=h,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t,n){"use strict";var o=n(0);e.exports=function(e,t){o.forEach(e,(function(n,o){o!==t&&o.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[o])}))}},function(e,t,n){"use strict";var o=n(6);e.exports=function(e,t,n){var r=n.config.validateStatus;!r||r(n.status)?e(n):t(o("Request failed with status code "+n.status,n.config,null,n.request,n))}},function(e,t,n){"use strict";e.exports=function(e,t,n,o,r){return e.config=t,n&&(e.code=n),e.request=o,e.response=r,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,n){"use strict";var o=n(20),r=n(21);e.exports=function(e,t){return e&&!o(t)?r(e,t):t}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var o=n(0),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,a,s={};return e?(o.forEach(e.split("\n"),(function(e){if(a=e.indexOf(":"),t=o.trim(e.substr(0,a)).toLowerCase(),n=o.trim(e.substr(a+1)),t){if(s[t]&&r.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}})),s):s}},function(e,t,n){"use strict";var o=n(0);e.exports=o.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var o=e;return t&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=o.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},function(e,t,n){"use strict";var o=n(0);e.exports=o.isStandardBrowserEnv()?{write:function(e,t,n,r,a,s){var i=[];i.push(e+"="+encodeURIComponent(t)),o.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),o.isString(r)&&i.push("path="+r),o.isString(a)&&i.push("domain="+a),!0===s&&i.push("secure"),document.cookie=i.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var o=n(8);function r(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new o(e),t(n.reason))}))}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var e;return{token:new r((function(t){e=t})),cancel:e}},e.exports=r},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";n.r(t);var o=[{featureType:"all",elementType:"geometry.fill",stylers:[{weight:"2.00"}]},{featureType:"all",elementType:"geometry.stroke",stylers:[{color:"#9c9c9c"}]},{featureType:"all",elementType:"labels.text",stylers:[{visibility:"on"}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#f2f2f2"}]},{featureType:"landscape",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"landscape.man_made",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"all",stylers:[{saturation:-100},{lightness:45}]},{featureType:"road",elementType:"geometry.fill",stylers:[{color:"#eeeeee"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#7b7b7b"}]},{featureType:"road",elementType:"labels.text.stroke",stylers:[{color:"#ffffff"}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"all",stylers:[{color:"#46bcec"},{visibility:"on"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#c6e2ef"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#070707"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#ffffff"}]}];const r=n(9);async function a(e){return(await r.get("api/locations")).data.filter(t=>e.Za.j>t.y&&e.Za.i<t.y&&e.Va.j>t.x&&e.Va.i<t.x).sort((t,n)=>{let o=(e.Za.j+e.Za.i)/2,r=(e.Va.j+e.Va.i)/2;return Math.abs(t.x-r)+Math.abs(t.y-o)-(Math.abs(n.x-r)+Math.abs(n.y-o))})}async function s(e){const t=await(e=>r.get("api/locations/"+e))(e);return await t.data}async function i(e){const t=await s(e.id),n=await t[0];n.details=await JSON.parse(n.data),console.log(n),c(n)}const c=e=>{const t=document.createElement("button");t.innerText="back to results",t.addEventListener("click",e=>{e.preventDefault,document.getElementById("location-details").style.display="none",t.remove()}),t.setAttribute("class","close-detailed-view"),document.getElementById("body").append(t);const n=document.createElement("div");n.setAttribute("class","details-banner"),e.photoUrl?n.style.backgroundImage=`url(${e.photoUrl})`:n.style.backgroundImage="url('frontend/assets/images/image-placeholder.png')",n.style.backgroundPosition="center",n.style.backgroundSize="cover",n.style.height="350px",n.style.width="100%";const o=document.createElement("div");o.setAttribute("class","details-header");const r=document.createElement("h1");r.textContent=e.title,o.appendChild(r);const a=document.createElement("div");a.setAttribute("class","details-list");const s=document.createElement("div");s.setAttribute("class","address");const i=document.createElement("img");i.src="frontend/assets/images/location.svg";const c=document.createElement("p");let l=[];e.street&&l.push(e.street),e.city&&l.push(e.city),e.state&&l.push(e.state),e.zip&&5===e.zip.length&&l.push(e.zip),c.textContent=l.join(", "),s.appendChild(i),s.appendChild(c);const u=document.createElement("span");u.setAttribute("class","detailed-times");const d=document.createElement("img");d.src="frontend/assets/images/time.svg";const p=document.createElement("div");if(e.Season1Time){u.appendChild(d);const t=document.createElement("div");e.Season1Time.split(";").filter(e=>e.length>2).forEach(e=>{let n=document.createElement("p");n.textContent=e,t.appendChild(n)}),u.append(t)}if(e.Available_Months){u.appendChild(d);let t=e.Available_Months.split(";").filter(e=>e.length>2),n=document.createElement("p");t.length>1?n.textContent=`${t[0]} - ${t[t.length-1]}`:n.textContent=t[0],p.append(n),u.append(p)}const f=document.createElement("h3");switch(f.textContent=e.type,e.type){case"csa":f.style.color="#f1d600",f.textContent="CSA Association";break;case"market":f.style.color="#35acff",f.textContent="Farmer's Market";break;case"farmstand":f.style.color="#00ee3e",f.textContent="Farm Stand";break;case"foodhub":f.style.color="#a839ff",f.textContent="Food Hub"}a.appendChild(f),a.appendChild(s),a.appendChild(u);let m=document.getElementById("location-details");m.innerHTML="",m.append(n),m.append(o),m.append(a),m.style.display="block"},l=()=>window.google?{url:"frontend/assets/images/market-pin.svg",size:new window.google.maps.Size(71,71),origin:new window.google.maps.Point(0,0),anchor:new window.google.maps.Point(17,34),scaledSize:new window.google.maps.Size(50,50)}:"",u=e=>{e.setMap(null),document.getElementById(e.id).remove(),delete window.markers[e.id]},d=(e,t,n)=>{let o;switch(t.type){case"csa":o=window.google?{url:"frontend/assets/images/csa-pin.svg",size:new window.google.maps.Size(71,71),origin:new window.google.maps.Point(0,0),anchor:new window.google.maps.Point(17,34),scaledSize:new window.google.maps.Size(50,50)}:"";break;case"foodhub":o=window.google?{url:"frontend/assets/images/foodhub-pin.svg",size:new window.google.maps.Size(71,71),origin:new window.google.maps.Point(0,0),anchor:new window.google.maps.Point(17,34),scaledSize:new window.google.maps.Size(50,50)}:"";break;case"farmstand":o=window.google?{url:"frontend/assets/images/farmstand-pin.svg",size:new window.google.maps.Size(71,71),origin:new window.google.maps.Point(0,0),anchor:new window.google.maps.Point(17,34),scaledSize:new window.google.maps.Size(50,50)}:"";break;case"market":default:o=l()}let r=new window.google.maps.Marker({icon:o,map:e,title:t.title,id:t.id,position:{lat:parseFloat(t.y),lng:parseFloat(t.x)}}),a=p(n,r,t);return r.addListener("mouseover",a.mouseover),r.addListener("mouseout",a.mouseout),r.addListener("click",a.click),r},p=(e,t,n)=>({mouseover:()=>{e.open(map,t);let o=document.getElementById(n.id);o&&(o.style.backgroundColor="lightblue")},mouseout:()=>{e.close(map,t);let o=document.getElementById(n.id);o&&(o.style.backgroundColor="")},click:()=>{i(n)}});var f=(e,t,n)=>{let o=document.createElement("div");o.setAttribute("id",e.id),o.setAttribute("class","map-detail-item"),window.locationSample=e;const r=document.createElement("span");r.setAttribute("class","title"),r.textContent=e.title;const a=document.createElement("h3");switch(a.textContent=e.type,e.type){case"csa":a.style.color="#f1d600";break;case"market":a.style.color="#35acff";break;case"farmstand":a.style.color="#00ee3e";break;case"foodhub":a.style.color="#a839ff"}const s=document.createElement("div");if(s.setAttribute("class","times"),e.Season1Time){let t=e.Season1Time.split(";").filter(e=>e.length>2);t.length>2&&(t.splice(2),t.push("View more...")),t.slice(0,3).forEach(e=>{let t=document.createElement("p");t.textContent=e,s.appendChild(t)})}if(e.Available_Months){let t=e.Available_Months.split(";").filter(e=>e.length>2);if(t.length>1){let e=document.createElement("p");e.textContent=`${t[0]} - ${t[t.length-1]}`,s.appendChild(e)}else{let e=document.createElement("p");e.textContent=t[0],s.appendChild(e)}}const c=document.createElement("div");c.setAttribute("class","address");const l=document.createElement("p"),u=document.createElement("p");let d=[];e.street&&(l.textContent=e.street),e.city&&d.push(e.city),e.state&&d.push(e.state),e.zip&&5===e.zip.length&&d.push(e.zip),u.textContent=d.join(", "),c.appendChild(l),c.appendChild(u),c.style.marginBottom="5px",o.appendChild(a),o.appendChild(r),o.appendChild(c),o.appendChild(s),o.addEventListener("click",()=>{i(e)}),o.addEventListener("mouseover",()=>{n.open(map,t)}),o.addEventListener("mouseout",()=>{n.close(map,t)}),document.getElementById("capture").appendChild(o)};async function m(e){let{pageNum:t,pageSize:n}=window.navState,o=t*n,r=(t-1)*n,s=await a(e);window.navState.resultNum=s.length;let i={};for(let e=r;e<o;e++)s[e]&&(i[s[e].id]=s[e]);return i}async function h(){let{pageNum:e,pageSize:t,resultNum:n}=window.navState,o=document.createElement("div");o.setAttribute("class","nav-details");let r=document.createElement("h3");r.setAttribute("id","nav-text");let a=n>0?(e-1)*t+1:0,s=n<e*t?n:e*t;r.textContent=`showing results ${a} - ${s}`,o.appendChild(r);let i=document.createElement("div");i.setAttribute("class","arrows");let c=document.createElement("img");c.style.height="32px",c.style.width="32px",c.src=e>1?"frontend/assets/images/arrow--left.svg":"frontend/assets/images/arrow--left-gray.svg",c.addEventListener("click",(async function(){let{pageNum:e,pageSize:t,resultNum:n}=window.navState;if((e-1)*t<=0)return void(c.src="frontend/assets/images/arrow--left-gray.svg");(e-2)*t<=0?(e--,c.src="frontend/assets/images/arrow--left-gray.svg"):(e--,c.src="frontend/assets/images/arrow--left.svg");let o={pageNum:e,pageSize:t,resultNum:n};window.navState=o;let r=await m(window.map.getBounds());window.pageLocations=r,g(r),h()}));let l=document.createElement("img");l.style.height="32px",l.style.width="32px",l.src=e*t>=n?"frontend/assets/images/arrow--right-gray.svg":"frontend/assets/images/arrow--right.svg",l.addEventListener("click",(async function(){var{pageNum:e,pageSize:t,resultNum:n}=window.navState;if(e*t>=n)return void(l.src="frontend/assets/images/arrow--right-gray.svg");(e+1)*t>=n?(e++,l.src="frontend/assets/images/arrow--right-gray.svg"):(e++,l.src="frontend/assets/images/arrow--right.svg");let o={pageNum:e,pageSize:t,resultNum:n};window.navState=o;let r=await m(window.map.getBounds());window.pageLocations=r,g(r),h()})),i.appendChild(c),i.appendChild(l);let u=document.getElementById("pac-nav");u.innerHTML="",u.appendChild(o),u.appendChild(i)}const g=e=>{let{pageSize:t}=window.navState,n=Object.values(window.markers);for(let o=0;o<t;o++){let t=n[o];t&&(e[t.id]||u(t))}let o=Object.values(e);for(let e=0;e<t;e++){let t=o[e];if(t){let e=t.id;if(!window.markers[e]){let e=(r=void 0,r=`<div class="label"><h2>${t.title}</h2></div>`,new google.maps.InfoWindow({content:r})),n=d(window.map,t,e);f(t,n,e),window.markers[n.id]=n}}}var r;h()},y=()=>{let e=document.getElementsByClassName("refresh-button");for(let t=0;t<e.length;t++)e[t].remove();document.getElementById("location-details").style.display="none";let t=document.getElementsByClassName("close-detailed-view")[0];t&&t.remove()};window.removeRefreshButton=y;const w=(e,t,n)=>{let o=document.createElement("input");o.setAttribute("type","checkbox"),o.setAttribute("id",n),o.setAttribute("checked",!0);let r=document.createElement("p");r.setAttribute("class","key-label"),r.textContent=t;let a=document.createElement("img");a.setAttribute("src",e);let s=document.createElement("div");return s.append(a),s.append(r),s};const v=()=>{let e=document.createElement("div");e.setAttribute("id","modal-background");let t=document.createElement("div");t.setAttribute("id","menu-modal");let n=document.createElement("div");n.setAttribute("class","menu-buttons");let o=document.createElement("button");o.textContent="About";let r=document.createElement("button");r.textContent="Nearby Farmer's Market";let a=document.createElement("button");a.textContent="Nearby CSA Dropoff";let s=document.createElement("button");s.textContent="Nearby Farm Stand";let i=document.createElement("button");i.textContent="Nearby Food Hub",n.appendChild(o),n.appendChild(r),n.appendChild(a),n.appendChild(s),n.appendChild(i),t.appendChild(n);let c=document.getElementById("body");c.appendChild(e),c.appendChild(t)},b=()=>{window.markers={},window.posMarker=null;window.navState={pageNum:1,pageSize:10,resultNum:0},h(),(()=>{let e=document.createElement("img");e.setAttribute("src","frontend/assets/images/open-menu.svg"),e.setAttribute("class","hamburger"),e.addEventListener("click",v);let t=document.createElement("img");t.setAttribute("src","frontend/assets/images/search.svg"),t.setAttribute("class","search-icon"),document.getElementById("body").append(t)})();var e=document.getElementById("pac-input");const t=new window.google.maps.places.SearchBox(e);async function n(){let e=window.map.getBounds();t.setBounds(e);let n=await m(e);window.pageLocations=n,g(n),window.navState.pageNum=1,h(),y()}window.map=new window.google.maps.Map(document.getElementById("map"),{center:new window.google.maps.LatLng(40.39,-96.91),zoom:5,mapTypeId:"roadmap",styles:o,disableDefaultUI:!0}),navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{var t={lat:e.coords.latitude,lng:e.coords.longitude};window.map.panTo(t),function e(t,n){var o=arguments[2]||t.getZoom();o!=n&&(window.google.maps.event.addListenerOnce(t,"zoom_changed",(function(r){e(t,n,o+(n>o?1:-1))})),setTimeout((function(){t.setZoom(o)}),80))}(window.map,10)}),(()=>{let e=w("frontend/assets/images/carbon-location.svg","Searched location","pos"),t=w("frontend/assets/images/market-pin.svg","Farmer's Market","farmersmarket"),n=w("frontend/assets/images/farmstand-pin.svg","Farm Stand","farmstand"),o=w("frontend/assets/images/foodhub-pin.svg","Food Hub","foodhub"),r=w("frontend/assets/images/csa-pin.svg","CSA Dropoff","csa"),a=document.createElement("button");a.setAttribute("class","hide-reveal-key"),a.textContent="+";let s=document.createElement("div");s.setAttribute("class","map-key");let i=document.createElement("h3");i.textContent="Map Key",i.setAttribute("class","key-title");let c=document.createElement("div");c.setAttribute("class","key-content"),c.style.display="none",s.append(i),s.append(a),c.appendChild(e),c.appendChild(t),c.appendChild(o),c.appendChild(n),c.appendChild(r),s.append(c),a.addEventListener("click",()=>{"+"===a.textContent?(c.style.display="block",s.style.height="275px",a.textContent="-"):(c.style.display="none",s.style.height="auto",a.textContent="+")}),document.getElementById("body").appendChild(s)})();var r=0;window.map.addListener("bounds_changed",()=>{r>0&&(e=>{let t=document.createElement("button");t.textContent="🔍 Search this area",t.setAttribute("class","refresh-button"),t.style.display="none",t.addEventListener("click",()=>{e(),t.remove()}),0===document.getElementsByClassName("refresh-button").length&&document.getElementById("map").appendChild(t),setTimeout(()=>{let e=document.getElementsByClassName("refresh-button")[0];e&&(e.style.display="block")},200)})(n),r++}),window.map.addListener("zoom_changed",()=>{setTimeout(n,100)}),t.addListener("places_changed",()=>{var e=t.getPlaces()[0];if(!e)return;if(!e.geometry)return;window.place=e;let n=document.getElementById("pac-input");n.value=e.formatted_address,n.setAttribute("placeholder","enter your location"),window.posMarker&&window.posMarker.setMap(null),posMarker=((e,t)=>new window.google.maps.Marker({map:e,icon:window.google?{url:"frontend/assets/images/carbon-location.svg",size:new window.google.maps.Size(71,71),origin:new window.google.maps.Point(0,0),anchor:new window.google.maps.Point(17,34),scaledSize:new window.google.maps.Size(50,50)}:"",title:t.name,position:t.geometry.location}))(window.map,e);var o=new window.google.maps.LatLngBounds;e.geometry.viewport?o.union(e.geometry.viewport):o.extend(e.geometry.location),window.map.fitBounds(o)})};if(!window.google){let e=document.createElement("script");e.type="text/javascript",e.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAZNRumUBPe3zF3B9zrAm8hsEqOTNEtoWs&libraries=places,geometry",e.defer=!0,e.async=!0,document.head.appendChild(e)}const E=()=>{window.google?b():setTimeout(E,1e3)};document.addEventListener("DOMContentLoaded",E)}]);